var rootDir;var contentHack={selectorName:"content",hackMode:"content-in"};var self=this;var rootDir="/";var extrasPath;var appList=[];var appArray=[];var universals={isSet:false,path:undefined};var readyFired=false;var appCheck=false;var thisVersion="1.0.0 Beta";if(!window.console){console={log:function(){}}}function setDir(b,a){a=="root"?rootDir=b:universals.path=b}String.prototype.isIgnored=function(){return(this.substr(0,2)=="//"||this=="")};String.prototype.isPublic=function(){return(this.substr(0,5)=="http:"||this.substr(0,6)=="https:")};String.prototype.isJS=function(){return(this.substr(this.length-3,this.length)==".js")};function clearCache(a){var b=("w"==(localStorage.setItem="w"));if(b){localStorage.clear();consoleLog("Cache has been cleared. Reloading...");location.reload(true)}else{consoleLog("This browser does not support localStorage.","error")}}function consoleLog(d,a,c){if(typeof window.consoleLogger=="function"){try{consoleLogger(d,a,c)}catch(b){console.error("Kickstrap error. Could not call consoleLog() "+b);console.log(d)}}}function formatString(b,a){b=String(b);if(a){b=String(b);b=b.replace(/\\'/g,"'");b=b.replace(/\\"/g,'"');b=b.replace(/\\0/g,"\0");b=b.replace(/\\\\/g,"\\");b=b.substring(1,b.length-1)}else{b=b.replace(/['"]/g,"")}b=b.replace(/br-/ig,";");return b}Array.prototype.remove=function(c,b){var a=this.slice((b||c)+1||this.length);this.length=c<0?this.length+c:c;return this.push.apply(this,a)};String.prototype.splitCSV=function(c){for(var d=this.split(c=c||","),a=d.length-1,b;a>=0;a--){d[a]=d[a].replace(/ /g,"");if(d[a].replace(/"\s+$/,'"').charAt(d[a].length-1)=='"'){if((b=d[a].replace(/^\s+"/,'"')).length>1&&b.charAt(0)=='"'){d[a]=d[a].replace(/^\s*"|"\s*$/g,"").replace(/""/g,'"')}else{if(a){d.splice(a-1,2,[d[a-1],d[a]].join(c))}else{d=d.shift().split(c).concat(d)}}}else{d[a].replace(/""/g,'"')}}return d};if(!("every" in Array.prototype)){Array.prototype.every=function(a,c){for(var b=0,d=this.length;b<d;b++){if(b in this&&!a.call(c,this[b],b,this)){return false}}return true}}function loadApp(a){appArray=[];appList=[a];window[a]=new app(a)}var kickstrap={hello:"Kickstrap: Hi!",edit:function(){document.body.contentEditable="true";document.designMode="on";void 0;if(typeof window.$.pnotify=="function"){$.pnotify({title:"Prototyping Mode",text:"You can now edit anything in this page. (But it won't be saved!)",type:"success",styling:"bootstrap"})}},readyFxs:[],ready:function(a){this.readyFxs.push(a)},testParams:{readyCount:0}};function themeFunction(a){$.ajax({type:"GET",url:rootDir+"Kickstrap/themes/"+a+"/functions.js",dataType:"script",context:self})}setupKickstrap();function setupKickstrap(){var b=d();if(b>-1){if(b<9){contentHack.selectorName="ie8";contentHack.hackMode="ie8"}else{if(b>=9){}else{contentHack.selectorName="content"}}}function d(){var g=-1;if(navigator.appName=="Microsoft Internet Explorer"){var e=navigator.userAgent;var f=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(f.exec(e)!=null){g=parseFloat(RegExp.$1)}}return g}if($("#appList").css("content")=="normal"||$("#appList").css("content")==undefined){contentHack.selectorName=="ie8";if($("#appList").css("ie8")==undefined||$("#appList").css("ie8")==""){var c="";contentHack.hackMode="loop";for(i=0;i<document.styleSheets.length;i++){for(j=0;j<document.styleSheets[i].rules.length;j++){var a=document.styleSheets[i].rules[j].selectorText;if(a=="#appList"){appList=formatString(document.styleSheets[i].rules[j].style.content,true).splitCSV()}else{if(a=="script#rootDir"||a=="script#console"||a=="script#caching"){c+=formatString(document.styleSheets[i].rules[j].style.content,true)}}}}document.write(c)}}document.write('<script id="rootDir" type="text/javascript">appendMagic(\'#rootDir\');<\/script><script id="themeFunctions">appendMagic(\'#themeFunctions\');<\/script><script id="console" type="text/javascript">appendMagic(\'#console\');<\/script><script id="caching" type="text/javascript">appendMagic(\'#caching\');initKickstrap();<\/script>')}function appendMagic(b){if(contentHack.hackMode!="loop"){var a=formatString($(b).css(contentHack.selectorName),true);if(a=="ndefine"){a="<script><\/script>"}document.write(a)}}function initKickstrap(){if(!universals.isSet&&universals.path=="none"){universals.isSet=true}if(universals.isSet){if(contentHack.hackMode!="loop"){appList=(formatString($("#appList").css(contentHack.selectorName))).splitCSV()}for(i=0;i<appList.length;i++){theapp=appList[i];if(theapp.isIgnored()){if(theapp!=""){}appList.remove(i);i--}else{window[appList[i]]=new app(theapp)}}}else{universal=new app("universal")}}function cssIfy(b){var a=document.createElement("link");a.setAttribute("rel","stylesheet");a.setAttribute("type","text/css");a.setAttribute("href",b);document.getElementsByTagName("body")[0].appendChild(a)}function app(b){this.resourcesRequired=[];this.resourcesDependent=[];this.countRequired=[999,0];this.countDependent=[999,0];this.name=b;this.loaded=false;extrasPath=rootDir+"Kickstrap/apps/";this.configPath=extrasPath+b+"/config.ks";if(b.substring(0,5)=="http:"||b.substring(0,6)=="https:"){this.configPath=b}if(!universals.isSet&&universals.path!="local"&&universals.path!=undefined){this.configPath=universals.path+"/universal/config.ks"}$.ajax({type:"GET",url:this.configPath,dataType:"html",context:self,success:function(e){this.resources=e.split(/\r\n|\n/);c(this.resources)},error:function(g,e,f){consoleLog('"'+b+'"? Are you sure you spelled that correctly? ['+g.status+" ("+f+")]","error")}});function c(g){var e=g[0].splitCSV();for(i=0;i<e.length;i++){if(e[i].isIgnored()){e.splice(e.indexOf(e[i]),1)}}window[b].resourcesRequired=e;if(g[1]){var f=g[1].splitCSV();for(i=0;i<f.length;i++){if(f[i].isIgnored()){f.splice(f.indexOf(f[i]),1)}}window[b].resourcesDependent=f}appArray.push(window[b]);if(!universals.isSet){a()}if(appArray.length==appList.length){a()}}function d(){universals.isSet=true;appArray=[];initKickstrap();universal.loaded=true}function a(){if(universals.isSet&&appList.length>0){appCheck=true}for(i=0;i<appArray.length||function(){if(!universals.isSet&&appArray[0].countRequired[1]==0){d()}}();i++){appArray[i].countRequired[0]=0;if(contentHack.hackMode!="ie8"){consoleLog("Kickstrap: "+appArray[i].name,null,appArray[i])}for(j=0;j<appArray[i].resourcesRequired.length;j++){var e=appArray[i].resourcesRequired[j];var f=extrasPath+appArray[i].name+"/"+e;if(e.isPublic()){f=e}if(!e.isIgnored()){if(e.isJS()){$.ajax({type:"GET",url:(f),dataType:"script",context:this,beforeSend:function(h,g){h.thisIs=appArray[i];h.thisIs.countRequired[1]++},success:function(m,n,l){var g=l.thisIs;g.countRequired[0]++;if(g.countRequired[0]==g.countRequired[1]){if(!universals.isSet){universals.isSet=true;appArray=[];initKickstrap();universal.loaded=true;universal.countDependent=[0,0]}g.countDependent[0]=0;kickstrapReady(g.name);for(k=0;k<g.resourcesDependent.length;k++){var h=extrasPath+g.name+"/"+g.resourcesDependent[k];if(g.resourcesDependent[k].isPublic()){h=g.resourcesDependent[k]}if(h.isJS()){$.ajax({type:"GET",url:(h),dataType:"script",context:this,beforeSend:function(p,o){p.thisIs=g;p.thisIs.countDependent[1]++},success:function(q,r,p){var o=p.thisIs;o.countDependent[0]++;kickstrapReady(o.name)}})}else{g.countDependent[0]++;g.countDependent[1]++;cssIfy(h)}}}}})}else{appArray[i].countRequired[0]++;appArray[i].countRequired[1]++;cssIfy(f)}}}}}}function kickstrapReady(b){if(appCheck){this.loadedLoop=[];for(i=0;i<appArray.length||function(){if(this.loadedLoop.every(Boolean)){a()}}();i++){var c=appArray[i].countRequired;var d=appArray[i].countDependent;if(c[0]==c[1]&&d[0]==d[1]){appArray[i].loaded=true}else{appArray[i].loaded=false}this.loadedLoop.push(appArray[i].loaded)}}function a(){if(!readyFired){readyFired=true;kickstrap.testParams.readyCount++;consoleLog("Executing kickstrap.ready() functions");for(i=0;i<kickstrap.readyFxs.length;i++){(kickstrap.readyFxs[i])()}}}};